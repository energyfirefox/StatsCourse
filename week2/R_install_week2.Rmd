---
title: "Prometheus. Аналіз даних та статистичне виведення на мові R. Конспект по R"
author: "Анастасія Корнілова"
date: "жовтень, 2016"
output: word_document
---

Встановлення R: 

 - перейдіть за посиланням <https://cloud.r-project.org/>
 - оберіть вашу операційну систему
 - завантажте відповідний пакунок
 - інсталюйте його 

Встановлення RStudio:

 - перейдіть за посиланням <https://www.rstudio.com/products/rstudio/download/>
 - оберіть вашу операційну систему
 - завантажте відповідний пакунок
 - інсталюйте його 
 

Створити новий файл в RStduio:

- в меню обрати пункт меню `File` 
- далі `New File`
- обрати пункт `RScript`

R має модульну структуру. Ви встановлюєте базовий функціонал і розширяєте його потрібними вам бібліотеками.
Зараз у репозиторії CRAN наличується ~ 7000 бібліотек. Для встановлення бібліотеки використовується команда
`install.packages`

Скопіюйте у R файл ці команди:

```{r, eval=FALSE}
install.packages('dplyr', dependencies = TRUE)
install.packages('ggplot2', dependencies = TRUE)
```

Щоб виконати код, виділіть рядки та натисніть піктограму Run з зеленою стрілкою або комбінацію клавіш `CTRL + ENTER` або `COMMAND + ENTER`. Також код можна набирати в консолі(нижня ліва панель в RStudio).

Для завантаження в робоче середовище команда `library`.
Далі завантажте ці бібліотеки до вашого робочого середовища. Це можна зробити з допомогою функції `library`. Зауважте, що ми встановлюємо бібліотеку один раз, але завантажувати її потрібно щоразу, як ви перезапускаєте RStudio. Тобто при наступному запуску RStudio команди інсталяції не будуть потрібні і їх можна буде закоментувати використовуючи символ `#`:

## R як калькулятор:
```{r}
2+3-8 # додавання та віднімання
7*5/2 # множення та ділення
pi # константа пі
sqrt(4) # корінь квадратний
2^3 # піднесення до степеня
```

Символ присвоєння: `<-`
```{r}
# x присвоїти значення 2
x <- 2

# вивести значення x
x

```

`x` та `X` - різні змінні

```{r}
X <- 3

X
x

```


## Типи даних в R:

* Логічні - `TRUE`, `FALSE`
 + Стрічкові - `character`
 + Числові - `numeric`, `integer`, `double`, `complex`
 
На відміну від мов Java чи C в R не обов'язково декларувати тип змінної.
Дізнатися тип має змінна можна з допомогою функції `class`

```{r}
v1 <- TRUE
class(v1)

v1 <- -10.6
class(v1)

v1 <- 3L # L вказує що це ціле число
class(v1)

v1 <- 3+2i
class(v1)

v1 <- "stats"
class(v1)
```


## Типи R обєктів

* Вектор 
 + Матриця
 + Список(list)
 + Фактор 
 + Таблиця даних(data frame)

**Вектор** - набір значень одного типу. Утворюється з допомогою функції `c` (скорочення від `concatenate`).

```{r}
numeric_vector <- c(1, 10, 49)

boolean_vector <- c(TRUE, FALSE, TRUE)

character_vector<- c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday")
```

Операції з векторами:

```{r}

x <- c(10, 2, 3, 7, 4)
y <- c(2, -1, 3, 2, 6)

# додавання/віднімання
# додаються/віднімаються поелементно
x + y 
x - y

# множення на скаляр
2*x

# застосування функції до кожного елемента
sqrt(x)

# сума елементів
sum(x)

# довжина вектора
length(x)

# об'єданання векторів
z <- c(x, y)
z

```

Доступ до елементів вектора.

```{r}
x <- 1:20 # інший спосіб задання вектора, вказуємо послідовність від 1 до 20
x
# п'ятий елемент(відлік починається з одиниці)
x[5]

# елементи з 6 по 12
x[6:12]

# елементи 6, 10, 13
x[c(6, 10, 13)]

# елементи  за винятком 6 та 13
x[-c(6, 13)]

# елементи, які більше 5
x[x > 5]

# елементи, які більше 5 і менші 15
x[x > 5 & x < 15]
# елементи, які менші 5 або більші 15
x[x < 5 | x > 15]

```

Відсутні значення (аналог `null`) позначаються як `NA` (Not avaliable).
Впливають на результат обчислень.
```{r}
x <- c(10, 20, NA, 4, NA, 2)
sum(x)
sum(x, na.rm = TRUE)
```

**Матриця** - по суті двовимірний вектор
```{r}
mat <- matrix(data=c(9,2,3,4,5,6),ncol=3)
mat
```


**Список** (list). Якщо елементи вектора мають бути одного типу, то елементи списку можуть мати різні типи.
```{r}
a <- list(p_name="Joe", 4, foo=c(3,8,9))
print(a)
```

Доступ до елементів з використанням символа `[[]]` або `$` та імені(якщо елемент має ім'я)

```{r}
a[[3]]
a[[1]]
a$p_name

```

**Фактор** - вектор для збереження категоріальних даних. Може містити як категоріальні впорядковані, так і категоріальні невпорядковані дані.

Нехай маємо звичайний вектор:

```{r}


mons <- c("March","April","January","November","January","September","October","September","November","August", "January","November","November","February","May","August","July","December","August","August","September", "November","February","April")

class(mons)

```
Створимо впорядкований фактор, в параметрі level задамо та задамо порядок:

```{r}

mons <- factor(mons,levels=c("January","February","March","April","May","June","July","August","September", "October","November","December"),ordered=TRUE)

class(mons)

```

Тепер можемо визначити, чи March < April
```{r}
mons[1] 
mons[2]

mons[1] < mons[2]
```

**Дата фрейм** (data frame) використовується для роботи з таблицями.

Є три способи створити data frame.

1. Об'єднати вектори однакової довжини, використовуючи команду `data.frame`

```{r}
cause <- c('pilot error', 'mechanical', 'weather', 'sabotage', 'other')
amount <- c(640, 195, 63, 95, 111)
plane_crash <- data.frame(cause, amount)
```

2. Використовувати вбудовані набори даних

```{r} 
head(airquality)
```

3. Зчитати з файла (розглянемо в лабораторній)

Базові операції

```{r} 
# кількість стовпців
ncol(airquality)

# кількість рядків
nrow(airquality)

# назви колонок
colnames(airquality)

# вcі дані для 5 місяця
airquality2 <- airquality[airquality$Month == 5, ]
head(airquality2)

# температура для  5 місяця
airquality$Temp[airquality$Month == 5]
```

